<div>
    <p-toast [breakpoints]="{'920px': {width: '100%', right: '0', left: '0'}}" [showTransformOptions]="'translateY(100%)'" [showTransitionOptions]="'500ms'" [hideTransitionOptions]="'500ms'" [showTransformOptions]="'translateX(100%)'"></p-toast>
    <p-confirmDialog>
        <ng-template pTemplate="message" let-message>
            <div class="flex flex-column align-items-center w-full gap-3 border-bottom-1 surface-border">
                <i class="pi pi-exclamation-circle text-6xl text-primary-500"></i>
                <p>{{ message.message }}</p>
            </div>
        </ng-template>
    </p-confirmDialog>

    <div class="m-2">
        <button class="btn bg-p-b p-3" (click)="showAgregar()"><i class='bx bx-plus'></i> Agregar </button>
    </div>
      
    <!-- sin resultados -->
    <div class="m-2 mt-3 bg-white p-3 shadow-sm rounded-3" *ngIf="foundData == false && loading == false">
        <h5>ASIGNACIONES DE PROVEEDORES Y SUCURSALES</h5>
        <div class="bg-white m-4 p-3 d-flex align-items-center rounded-3 flex-column">
            <img src="assets/img/nodata.jpg" style="width: 80%; max-width: 25rem;">
            <p>NO SE ENCONTRARON REGISTROS</p>

        </div>
    </div>

    <!-- skeleton -->

    <div class="m-2 mt-3 bg-white p-3 shadow-sm rounded-3" *ngIf="loading">
        <div class="row m-0">
            <div class="col-3"> <p-skeleton width="auto" styleClass="mb-2" height="3rem"></p-skeleton> </div>
            <div class="col-3"> <p-skeleton width="auto" styleClass="mb-2" height="3rem"></p-skeleton> </div>
            <div class="col-3"> <p-skeleton width="auto" styleClass="mb-2" height="3rem"></p-skeleton> </div>
            <div class="col-3"> <p-skeleton width="auto" styleClass="mb-2" height="3rem"></p-skeleton> </div>
        </div>
       
        <div class="row m-0 mt-3">
            <div class="col-3"> <p-skeleton width="auto" styleClass="mb-2" height="1.5rem"></p-skeleton> </div>
            <div class="col-3"> <p-skeleton width="auto" styleClass="mb-2" height="1.5rem"></p-skeleton> </div>
            <div class="col-3"> <p-skeleton width="auto" styleClass="mb-2" height="1.5rem"></p-skeleton> </div>
            <div class="col-3"> <p-skeleton width="auto" styleClass="mb-2" height="1.5rem"></p-skeleton> </div>
        </div>
        <div class="row m-0 mt-2">
            <div class="col-3"> <p-skeleton width="auto" styleClass="mb-2" height="1.5rem"></p-skeleton> </div>
            <div class="col-3"> <p-skeleton width="auto" styleClass="mb-2" height="1.5rem"></p-skeleton> </div>
            <div class="col-3"> <p-skeleton width="auto" styleClass="mb-2" height="1.5rem"></p-skeleton> </div>
            <div class="col-3"> <p-skeleton width="auto" styleClass="mb-2" height="1.5rem"></p-skeleton> </div>
        </div>
        <div class="row m-0 mt-2">
            <div class="col-3"> <p-skeleton width="auto" styleClass="mb-2" height="1.5rem"></p-skeleton> </div>
            <div class="col-3"> <p-skeleton width="auto" styleClass="mb-2" height="1.5rem"></p-skeleton> </div>
            <div class="col-3"> <p-skeleton width="auto" styleClass="mb-2" height="1.5rem"></p-skeleton> </div>
            <div class="col-3"> <p-skeleton width="auto" styleClass="mb-2" height="1.5rem"></p-skeleton> </div>
        </div>
        <div class="row m-0 mt-2">
            <div class="col-3"> <p-skeleton width="auto" styleClass="mb-2" height="1.5rem"></p-skeleton> </div>
            <div class="col-3"> <p-skeleton width="auto" styleClass="mb-2" height="1.5rem"></p-skeleton> </div>
            <div class="col-3"> <p-skeleton width="auto" styleClass="mb-2" height="1.5rem"></p-skeleton> </div>
            <div class="col-3"> <p-skeleton width="auto" styleClass="mb-2" height="1.5rem"></p-skeleton> </div>
        </div>
        <div class="row m-0 mt-2">
            <div class="col-3"> <p-skeleton width="auto" styleClass="mb-2" height="1.5rem"></p-skeleton> </div>
            <div class="col-3"> <p-skeleton width="auto" styleClass="mb-2" height="1.5rem"></p-skeleton> </div>
            <div class="col-3"> <p-skeleton width="auto" styleClass="mb-2" height="1.5rem"></p-skeleton> </div>
            <div class="col-3"> <p-skeleton width="auto" styleClass="mb-2" height="1.5rem"></p-skeleton> </div>
        </div>
        <div class="row m-0 mt-2">
            <div class="col-3"> <p-skeleton width="auto" styleClass="mb-2" height="1.5rem"></p-skeleton> </div>
            <div class="col-3"> <p-skeleton width="auto" styleClass="mb-2" height="1.5rem"></p-skeleton> </div>
            <div class="col-3"> <p-skeleton width="auto" styleClass="mb-2" height="1.5rem"></p-skeleton> </div>
            <div class="col-3"> <p-skeleton width="auto" styleClass="mb-2" height="1.5rem"></p-skeleton> </div>
        </div>
        <div class="row m-0 mt-2">
            <div class="col-3"> <p-skeleton width="auto" styleClass="mb-2" height="1.5rem"></p-skeleton> </div>
            <div class="col-3"> <p-skeleton width="auto" styleClass="mb-2" height="1.5rem"></p-skeleton> </div>
            <div class="col-3"> <p-skeleton width="auto" styleClass="mb-2" height="1.5rem"></p-skeleton> </div>
            <div class="col-3"> <p-skeleton width="auto" styleClass="mb-2" height="1.5rem"></p-skeleton> </div>
        </div>

    </div>

    <!-- lista -->
    <div class="m-2 mt-3" *ngIf="foundData && loading == false">
        <div class="m-3 rounded-3 bg-white p-3">
            <h5 class="text-center">ASIGNACIONES DE PROVEEDORES Y SUCURSALES</h5>
            <div class="row m-0 justify-content-center">   
                <div class="col-auto p-3"> 
                    <span>USUARIO</span>
                    <select class="form-select" style="height: 48PX;" [(ngModel)]="filtroUSer">
                    <option value="-1" selected>TODOS</option>
                    <option *ngFor="let item of catusuarios" [value]="item.id">{{item.nombre+' '+item.apellidoP}}</option>
                  </select></div>
                <div class="col-auto p-3">
                    <span>PROVEEDOR</span>
                    <select class="form-select" style="height: 48PX;" [(ngModel)]="filtroProv">
                        <option value="-1" selected>TODOS</option>
                        <option *ngFor="let item of catproveedores" [value]="item.codproveedor">{{item.codproveedor+'-'+item.nombre}}</option>
                      </select>
                </div>
                <div class="col-auto p-3" >
                    <p></p>
                    <button class="btn bg-p-b p-3" (click)="filtrar()">FILTRAR</button></div>
            </div>
        </div>

        <div class="m-4 p-3 bg-white shadow rounded-3">
            <table class="table">
                <thead >
                    <tr>
                        <th style="background-color: #fafafa;"></th>
                        <th style="background-color: #fafafa;">USUARIO</th>
                        <th style="background-color: #fafafa;">PROVEEDOR</th>
                        <th style="background-color: #fafafa;">SUCURSAL</th>
                    </tr>
                </thead>
                <tbody>

                    <tr *ngFor="let item of elementosfiltrados; let i=index">
                        <td><input class="form-check-input" type="checkbox" (change)="checkregistro(item.id)" [checked]="getCheck(item.id)"></td>
                        <td>{{item.nombre + ' '+item.ap_paterno}}</td>
                        <td>{{item.nombreprov}}</td>
                        <td>{{item.nombresuc}}</td>
                    </tr>

                </tbody>
            </table>

            <div class="d-flex justify-content-end gap-3">
                <button class="btn bg-p-b p-2" (click)="seleccionartodo()"><i class='bx bxs-check-square bx-sm'></i></button>
                <button class="btn bg-p-b p-2" (click)="desmarcartodo()"><i class='bx bxs-x-square bx-sm' ></i></button>
                <button class="btn btn-danger" (click)="showDelete()"><i class='bx bx-trash bx-sm' ></i></button>
            </div>

        </div>
    </div>

    <!-- MODAL AGREGAR DIA ESPECIAL -->

<p-dialog [header]="'AGREGAR'" [(visible)]="modalAgregar" [modal]="true" [style]="{ 'width': '50%','min-height':'500px' }" [draggable]="false" [resizable]="false">
    
    <div class="d-flex flex-column">

        <div class="row">
            <div class="col-md-6 p-3">
                <p class="fw-bold">PROVEEDOR</p>
                <select class="form-select" style="height: 48PX;" [(ngModel)]="selectedProv">
                    <option value="-1" selected>Seleccionar proveedor</option>
                    <option *ngFor="let item of catproveedores" [value]="item.codproveedor">{{item.codproveedor+'-'+item.nombre}}</option>
                  </select>
            </div>
            <div class="col-md-6 p-3">
                <p class="fw-bold">SUCURSALES</p>
                <p-multiSelect 
                [style]="{'width':'100%'}"
        [options]="catsucursales" 
        [(ngModel)]="selectedSucs" 
        optionLabel="name" 
        placeholder="Seleccionar sucursales" />
            </div>
        </div>


        <div class="p-3">
            <p class="fw-bold">USUARIO</p>
            <select class="form-select" style="height: 48PX;" [(ngModel)]="selectedUSer">
                <option value="-1" selected>Seleccionar usuario</option>
                <option *ngFor="let item of catusuarios" [value]="item.id">{{item.nombre+' '+item.apellidoP}}</option>
              </select>
        </div>

      
    </div>
    <br>
    <br>
    <br>
    <div class="d-flex justify-content-center" *ngIf="loading">
        <div class="lds-ring"><div></div><div></div><div></div><div></div></div>
      </div>

    <div class="mt-3 mb-3 d-flex  justify-content-end">
        <button class="btn bg-p-b p-3 rounded-4" (click)="saveData()"> <i class='bx bx-save' ></i> GUARDAR</button>
    </div>


</p-dialog>




</div>