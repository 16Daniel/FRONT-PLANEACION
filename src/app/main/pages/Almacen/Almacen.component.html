<h2 class="text-center mt-3">ALMACENAJE SUCURSAL</h2>

<div class="d-flex justify-content-start m-3">
<button class="btn bg-p-b p-3" (click)="showAgregar();"> <i class='bx bx-plus'></i> AGREGAR</button>
</div>

<div class="d-flex justify-content-center" *ngIf="loading">
  <div class="lds-ring"><div></div><div></div><div></div><div></div></div>
</div>

<div class="m-3 bg-white shadow rounded-3 p-3">
  <table class="table">
    <thead >
        <tr>
            <th style="background-color: #fafafa;"></th>
            <th style="background-color: #fafafa;">SUCURSAL</th>
            <th style="background-color: #fafafa;">ARTÍCULO</th>
            <th style="background-color: #fafafa;">CAPACIDAD</th>
            <th></th>
        </tr>
    </thead>
    <tbody>

        <tr *ngFor="let item of data; let i=index">
            <td><input class="form-check-input" type="checkbox" (change)="checkregistro(item.id)" [checked]="getCheck(item.id)"></td>
            <td>{{item.nomsucursal}}</td>
            <td>{{item.nomart}}</td>
            <td>{{item.capacidad}}</td>
            <td><button class="btn btn-primary" (click)="editar(item)"><i class='bx bx-edit'></i></button></td>
        </tr>

    </tbody>
</table>
<div class="d-flex justify-content-end gap-3">
  <button class="btn bg-p-b p-2" (click)="seleccionartodo()"><i class='bx bxs-check-square bx-sm'></i></button>
  <button class="btn bg-p-b p-2" (click)="desmarcartodo()"><i class='bx bxs-x-square bx-sm' ></i></button>
  <button class="btn btn-danger" (click)="showDelete()"><i class='bx bx-trash bx-sm' ></i></button>
</div>

</div>


<p-dialog header="AGREGAR ALMACENAJE" [(visible)]="modalagregar" [style]="{width: '75vw'}" [maximizable]="false" [modal]="true">

  <div class="row mb-4">
    <div class="col-6">
      <p class="mt-3 fw-bold" >SUCURSAL</p>
      <select class="form-select" [(ngModel)]="sucursalsel">
        <input type="text">
          <option *ngFor="let item of catsucursales" [value]="item.cod">{{item.name}}</option>
      </select>
    </div>

    <div class="col-6">
      <p class="mt-3 fw-bold" >ARTÍCULO</p>

      <select class="form-select" [(ngModel)]="articulo">
        <option *ngFor="let item of catitems" [value]="item.cod">{{item.descripcion}}</option>
      </select>
    </div>

  </div>

  <div class="row">
    <div class="col-md-12">
     <p>CAPACIDAD</p>
     <input class="form-control" type="number" [(ngModel)]="formcapacidad">
    </div>
   </div>

    <div class="d-flex justify-content-end mt-3">
      <button class="btn bg-p-b p-3" (click)="guardar()">GUARDAR</button>
    </div>

  </p-dialog>


  <p-dialog header="AGREGAR ALMACENAJE" [(visible)]="modalupdate" [style]="{width: '75vw'}" [maximizable]="false" [modal]="true">

    <div class="row mb-4">
      <div class="col-6">
        <p class="mt-3 fw-bold" >SUCURSAL</p>
        <select class="form-select" [(ngModel)]="sucursalsel" disabled>
          <input type="text">
            <option *ngFor="let item of catsucursales" [value]="item.cod">{{item.name}}</option>
        </select>
      </div>
  
      <div class="col-6">
        <p class="mt-3 fw-bold" >ARTÍCULO</p>
  
        <select class="form-select" [(ngModel)]="articulo" disabled>
          <option *ngFor="let item of catitems" [value]="item.cod">{{item.descripcion}}</option>
        </select>
      </div>
  
    </div>
  
    <div class="row">
      <div class="col-md-12">
       <p>CAPACIDAD</p>
       <input class="form-control" type="number" [(ngModel)]="formcapacidad">
      </div>
     </div>
  
      <div class="d-flex justify-content-end mt-3">
        <button class="btn bg-p-b p-3" (click)="guardar()">GUARDAR</button>
      </div>
  
    </p-dialog>
  


  <p-confirmDialog></p-confirmDialog>
<p-toast [breakpoints]="{'920px': {width: '100%', right: '0', left: '0'}}" [showTransformOptions]="'translateY(100%)'" [showTransitionOptions]="'500ms'" [hideTransitionOptions]="'500ms'" [showTransformOptions]="'translateX(100%)'"></p-toast>
